{{ define "main" }}
  {{ partial "container_open.html" . }}
    <div class="py-6 md:py-8">
      <section class="hero">
        <h1>{{ .Site.Title }}</h1>
        <p>{{ .Site.Params.description }}</p>
        <div class="accent-rule"></div>
      </section>

      {{ $posts := where .Site.RegularPages "Section" "not in" (slice "tags" "about" "archive") }}
      {{ if gt (len $posts) 0 }}
        <ul class="post-list">
          {{ range (sort $posts "Date" "desc") }}
            <li class="post-row">
              <div class="post-row-meta">
                <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
                <span aria-hidden="true">Â·</span>
                <span>{{ .ReadingTime }} min read</span>
              </div>

              <h2 class="post-row-title">
                <a href="{{ .RelPermalink }}">{{ .Title }}</a>
              </h2>

              {{ with .Params.description }}
                <p class="post-row-excerpt">{{ . }}</p>
              {{ end }}

              {{ with .Params.tags }}
                <div class="tag-row" aria-label="Tags">
                  {{ range first 4 . }}
                    <a class="tag-chip" href="{{ (printf "/tags/%s/" (. | urlize)) | relURL }}">{{ . }}</a>
                  {{ end }}
                </div>
              {{ end }}
            </li>
          {{ end }}
        </ul>

        {{ partial "social_links.html" . }}
      {{ else }}
        <div class="empty-state">
          <p>No posts yet.</p>
          <p>Add Markdown under <span class="mono">content/YYYY/MM/DD/slug/index.md</span>.</p>
        </div>
      {{ end }}
    </div>
  {{ partial "container_close.html" . }}
{{ end }}
